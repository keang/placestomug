<!DOCTYPE html>

<html>
    <head>
        <title> Places to Mug </title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">

        <!--link href="./css/bootstrap.min.css" rel="stylesheet" media="screen"-->
        <style>
        .ui-menu { width: 150px; }
        ul{
            list-style: none;
            padding = 10px;
        }
        </style>
    </head>    

    <script>
        $(document).ready(function($) {
            var curFaculty = null;
            $('#faculty_menu a:first').tab('show');
            $('a[data-toggle="tab"]').on('shown', function (e) {
                //tab shown bind
                //activeTab = e.target;
            });

            $("#submitform").click(function(){
                var curFaculty = $("ul#faculty_menu li.active").text();
                var areaToSubmit = document.getElementById("newArea").value;

                $.post("/addarea", {selectedFaculty:curFaculty, areaToSubmit:areaToSubmit}, function(){
                    $("#table_"+curFaculty).append("</<tr><td>"
                        +areaToSubmit+"</td></tr>");
                });

            });
        });
    </script>
    <body>
        
            <div class="row-fluid">
                <div class="span5 text-center">
                    <h1>Places to Mug</h1>
                    <p id="subtitle">Help us list down the mugging spots around NUS!</p>
                </div>
                <div class="span7" style="padding:40px">
                    <input type="text" class="input-large search-query" placeholder="New area" name="newArea" id="newArea">
                    <button class="btn" id="submitform">Submit</button>
                </div>
            </div>
        
        <div class="span12">
                <ul class="nav nav-tabs" id="faculty_menu"> 
                    {% for f in faculties %}                                         
                    <li><a href="#{{f}}" data-toggle="tab">{{f}}</a></li>
                    {% endfor %}
                </ul>

                <ul class="tab-content" id="areaList">
                    {% for f in faculties %}
                    <div class="tab-pane" id="{{f}}">
                        <table class="table table-striped" id="table_{{f}}">
                            {% for p in places %}
                                {% if p.faculty == f %}
                                <tr><td>{{p.area}}</td></tr>
                                {% endif %}
                            {% endfor %}
                        </table>
                    </div> 
                    {% endfor %}
                </ul>


        </div>
        
</body>
</html>